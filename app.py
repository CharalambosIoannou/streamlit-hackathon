import streamlit as st
import connection
import pandas as pd
import numpy as np
from pydantic import BaseModel
import streamlit_pydantic as sp



# Initial Setup (modal,CSS and Supabse connection)

class ExampleModel(BaseModel):
    question: str
    answer: str
    difficulty: int


file_name = "style.css"
with open(file_name) as f:
    st.markdown(f'<style>{f.read()}</style>', unsafe_allow_html=True)
stars_code = """<svg fill="#FFC324" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/><path d="M0 0h24v24H0z" fill="none"/></svg>"""


conn = st.experimental_connection("supabase", type=connection.SupabaseConnection, st_module=st)
all_rows = conn.query()





# Sidebar
st.sidebar.image("https://res.cloudinary.com/practicaldev/image/fetch/s--7MQClrRp--/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7ce4oq75sia6ni6q46s3.png" )
st.sidebar.title("Flashcards Application ðŸ“‡ ðŸ“– ")
st.sidebar.caption("A simple application with Git/GitHub interview questions flashcards")
st.sidebar.markdown("---")
st.sidebar.info("Made for the Streamlit hackathon")





# Main App


flashcard_tab, add_new_tab = st.tabs(["Flashcards", "Add New"])

with flashcard_tab:    
  tt = all_rows.sample(frac=0.25)

  if st.button('Random New Question'):
      tt = all_rows.sample(frac=0.25)


  # code for flashcard HTML and CSS: https://codepen.io/pgalor/pen/WKoXqM
  st.markdown(
                  f"""
                <div class="wrapper">
    <div class="card">
      <div class="front">
        <h1>Question</h1>
              <p> Difficulty: {stars_code * int(tt["difficulty"].tolist()[0]) }</p>
              <p>{tt["question"].tolist()[0]} </p>
      </div>
      <div class="right">
        <h1>Answer</h1>
      <p> {tt["answer"].tolist()[0]} </p>
      </div>
    </div>
      <div class="img-wrapper">
        <img src='data:image/png;base64,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' class="imageCard" alt=''>    
    </div>
  </div>

                  """,
                  unsafe_allow_html=True,
              )



with add_new_tab:  

  data = sp.pydantic_form(key="my_form", model=ExampleModel)
  if data:
      print("here")
      # st.json(data.json())
      test_add = conn.insert(data.json())
      st.success("Data Added Successfully")
